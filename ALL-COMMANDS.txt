================================================================================
                          ëª¨ë“  ëª…ë ¹ì–´ ì¹˜íŠ¸ì‹œíŠ¸
================================================================================

ğŸ“Œ ì´ íŒŒì¼ì„ ë³µì‚¬í•´ì„œ í„°ë¯¸ë„ ì˜†ì— ë‘ê³  ì‚¬ìš©í•˜ì„¸ìš”!

================================================================================
ğŸš€ ê´€ë¦¬ ìŠ¤í¬ë¦½íŠ¸ (ì¶”ì²œ)
================================================================================

# ì‹œì‘
./start.sh              # Linux/Mac
start.bat               # Windows

# ì¤‘ì§€
./stop.sh               # Linux/Mac
stop.bat                # Windows

# ì¬ì‹œì‘
./restart.sh            # Linux/Mac
restart.bat             # Windows

# ì¬ë¹Œë“œ
./rebuild.sh            # Linux/Mac
rebuild.bat             # Windows

# ì—…ë°ì´íŠ¸ (Git pull + ì¬ë°°í¬)
./update.sh             # Linux/Mac
update.bat              # Windows

# ìƒíƒœ í™•ì¸
./health.sh             # Linux/Mac
health.bat              # Windows

# ë¡œê·¸ í™•ì¸
./logs.sh               # Linux/Mac
logs.bat                # Windows

# ë°°í¬ (ëŒ€í™”í˜•)
./deploy.sh             # Linux/Mac
deploy.bat              # Windows


================================================================================
ğŸ³ Docker Compose ëª…ë ¹ì–´
================================================================================

# ì‹œì‘/ì¤‘ì§€/ì¬ì‹œì‘
docker-compose up -d                  # ë°±ê·¸ë¼ìš´ë“œ ì‹œì‘
docker-compose down                   # ì¤‘ì§€ ë° ì œê±°
docker-compose restart                # ì¬ì‹œì‘
docker-compose stop                   # ì¤‘ì§€ (ì œê±° ì•ˆí•¨)
docker-compose start                  # ì‹œì‘ (ê¸°ì¡´ ì»¨í…Œì´ë„ˆ)

# ìƒíƒœ í™•ì¸
docker-compose ps                     # ì»¨í…Œì´ë„ˆ ìƒíƒœ
docker-compose ps -a                  # ëª¨ë“  ì»¨í…Œì´ë„ˆ (ì¤‘ì§€ëœ ê²ƒ í¬í•¨)
docker-compose top                    # ì‹¤í–‰ ì¤‘ì¸ í”„ë¡œì„¸ìŠ¤

# ë¡œê·¸
docker-compose logs                   # ì „ì²´ ë¡œê·¸
docker-compose logs -f                # ì‹¤ì‹œê°„ ë¡œê·¸
docker-compose logs --tail=50         # ìµœê·¼ 50ì¤„
docker-compose logs library-nginx     # íŠ¹ì • ì»¨í…Œì´ë„ˆ
docker-compose logs -f library-mysql  # ì‹¤ì‹œê°„ (íŠ¹ì • ì»¨í…Œì´ë„ˆ)

# ë¹Œë“œ
docker-compose build                  # ì´ë¯¸ì§€ ë¹Œë“œ
docker-compose build --no-cache       # ìºì‹œ ì—†ì´ ë¹Œë“œ
docker-compose up -d --build          # ë¹Œë“œ í›„ ì‹œì‘

# íŠ¹ì • ì»¨í…Œì´ë„ˆë§Œ ì¡°ì‘
docker-compose restart library-nginx  # Nginxë§Œ ì¬ì‹œì‘
docker-compose stop library-mysql     # MySQLë§Œ ì¤‘ì§€
docker-compose up -d library-nginx    # Nginxë§Œ ì‹œì‘

# ì‹¤í–‰ ì¤‘ì¸ ì»¨í…Œì´ë„ˆì— ëª…ë ¹ ì‹¤í–‰
docker-compose exec library-nginx sh             # Nginx ì»¨í…Œì´ë„ˆ ì‰˜
docker-compose exec library-mysql mysql -uroot -p # MySQL ì ‘ì†

# ì •ë¦¬
docker-compose down -v                # ë³¼ë¥¨ê¹Œì§€ ì‚­ì œ
docker-compose down --rmi all         # ì´ë¯¸ì§€ê¹Œì§€ ì‚­ì œ


================================================================================
ğŸ—„ï¸  MySQL ê´€ë ¨
================================================================================

# MySQL ì»¨í…Œì´ë„ˆ ì ‘ì†
docker-compose exec library-mysql bash

# MySQL í´ë¼ì´ì–¸íŠ¸ ì ‘ì†
docker-compose exec library-mysql mysql -uroot -plibrary2024

# ë°ì´í„°ë² ì´ìŠ¤ ëª©ë¡
docker-compose exec library-mysql mysql -uroot -plibrary2024 -e "SHOW DATABASES;"

# íŠ¹ì • ë°ì´í„°ë² ì´ìŠ¤ ì‚¬ìš©
docker-compose exec library-mysql mysql -uroot -plibrary2024 library

# ë°±ì—…
docker-compose exec library-mysql mysqldump -uroot -plibrary2024 library > backup.sql

# ë³µì›
docker-compose exec -T library-mysql mysql -uroot -plibrary2024 library < backup.sql

# ì™¸ë¶€ì—ì„œ ì ‘ì†
mysql -h localhost -P 3307 -u root -plibrary2024


================================================================================
ğŸŒ Nginx ê´€ë ¨
================================================================================

# Nginx ì»¨í…Œì´ë„ˆ ì ‘ì†
docker-compose exec library-nginx sh

# ì„¤ì • í…ŒìŠ¤íŠ¸
docker-compose exec library-nginx nginx -t

# ì„¤ì • ë¦¬ë¡œë“œ
docker-compose exec library-nginx nginx -s reload

# ë¡œê·¸ í™•ì¸
docker-compose exec library-nginx tail -f /var/log/nginx/access.log
docker-compose exec library-nginx tail -f /var/log/nginx/error.log

# HTTP í…ŒìŠ¤íŠ¸
curl http://localhost:8080
curl -I http://localhost:8080          # í—¤ë”ë§Œ


================================================================================
ğŸ” Git ëª…ë ¹ì–´
================================================================================

# ìµœì‹  ì½”ë“œ ë°›ê¸°
git pull
git pull git@github.com:Kontrack/library.git main

# ìƒíƒœ í™•ì¸
git status
git log --oneline -5

# ë³€ê²½ì‚¬í•­ í™•ì¸
git diff

# ì»¤ë°‹
git add .
git commit -m "ë©”ì‹œì§€"
git push origin main

# ë¸Œëœì¹˜
git branch                    # ë¸Œëœì¹˜ ëª©ë¡
git checkout -b feature/new   # ìƒˆ ë¸Œëœì¹˜ ìƒì„±
git checkout main             # ë¸Œëœì¹˜ ì „í™˜


================================================================================
ğŸ’¾ Docker ì‹œìŠ¤í…œ ê´€ë¦¬
================================================================================

# ì‹œìŠ¤í…œ ì •ë³´
docker system df              # ë””ìŠ¤í¬ ì‚¬ìš©ëŸ‰
docker system info            # ì‹œìŠ¤í…œ ì •ë³´

# ì •ë¦¬
docker system prune           # ë¯¸ì‚¬ìš© ë°ì´í„° ì •ë¦¬
docker system prune -a        # ëª¨ë“  ë¯¸ì‚¬ìš© ë°ì´í„°
docker volume prune           # ë¯¸ì‚¬ìš© ë³¼ë¥¨ ì •ë¦¬

# ì´ë¯¸ì§€
docker images                 # ì´ë¯¸ì§€ ëª©ë¡
docker rmi <image_id>         # ì´ë¯¸ì§€ ì‚­ì œ

# ë³¼ë¥¨
docker volume ls              # ë³¼ë¥¨ ëª©ë¡
docker volume inspect <name>  # ë³¼ë¥¨ ìƒì„¸ì •ë³´
docker volume rm <name>       # ë³¼ë¥¨ ì‚­ì œ

# ë„¤íŠ¸ì›Œí¬
docker network ls             # ë„¤íŠ¸ì›Œí¬ ëª©ë¡
docker network inspect <name> # ë„¤íŠ¸ì›Œí¬ ìƒì„¸ì •ë³´


================================================================================
ğŸ“Š ëª¨ë‹ˆí„°ë§
================================================================================

# ë¦¬ì†ŒìŠ¤ ì‚¬ìš©ëŸ‰
docker stats                              # ì „ì²´
docker stats $(docker-compose ps -q)      # í”„ë¡œì íŠ¸ë§Œ

# ì‹¤ì‹œê°„ ë¡œê·¸ (ìƒ‰ìƒ ì¶”ê°€)
docker-compose logs -f --tail=100

# í”„ë¡œì„¸ìŠ¤ í™•ì¸
docker-compose top

# í¬íŠ¸ í™•ì¸
netstat -tlnp | grep 8080    # Linux
lsof -i :8080                # Mac
netstat -ano | findstr 8080  # Windows


================================================================================
ğŸ”§ ë¬¸ì œ í•´ê²°
================================================================================

# ëª¨ë“  ì»¨í…Œì´ë„ˆ ê°•ì œ ì¤‘ì§€
docker stop $(docker ps -aq)

# ëª¨ë“  ì»¨í…Œì´ë„ˆ ì‚­ì œ
docker rm $(docker ps -aq)

# íŠ¹ì • ì»¨í…Œì´ë„ˆ ë¡œê·¸ (ë§ˆì§€ë§‰ 100ì¤„)
docker-compose logs --tail=100 library-nginx

# ì»¨í…Œì´ë„ˆ ì¬ìƒì„±
docker-compose up -d --force-recreate

# ìºì‹œ ì—†ì´ ì™„ì „ ì¬ë¹Œë“œ
docker-compose build --no-cache --pull
docker-compose up -d

# Docker ì™„ì „ ì´ˆê¸°í™” (ì£¼ì˜!)
docker-compose down -v --rmi all
docker system prune -a --volumes


================================================================================
ğŸ¯ ì‹¤ì „ í™œìš© ì˜ˆì‹œ
================================================================================

# ë§¤ì¼ ì•„ì¹¨ ì‹œì‘ ë£¨í‹´
./start.sh && ./health.sh

# ì½”ë“œ ìˆ˜ì • í›„ ì¦‰ì‹œ ë°˜ì˜
./restart.sh && curl http://localhost:8080

# GitHub ì—…ë°ì´íŠ¸ í›„ ë°°í¬
./update.sh && ./logs.sh

# ë¬¸ì œ ë°œìƒ ì‹œ ì§„ë‹¨
./health.sh
./logs.sh
docker-compose ps
docker stats --no-stream

# ì™„ì „ ì¬ì‹œì‘
./stop.sh && sleep 3 && ./start.sh

# ë¡œê·¸ë¥¼ íŒŒì¼ë¡œ ì €ì¥
docker-compose logs > system-$(date +%Y%m%d).log


================================================================================
âš¡ ìì£¼ ì‚¬ìš©í•˜ëŠ” ì¡°í•©
================================================================================

# ì¬ì‹œì‘ í›„ ë¡œê·¸ í™•ì¸
./restart.sh && ./logs.sh

# ì—…ë°ì´íŠ¸ í›„ ìƒíƒœ í™•ì¸
./update.sh && ./health.sh

# ë¹Œë“œ í›„ ì¦‰ì‹œ í…ŒìŠ¤íŠ¸
./rebuild.sh && curl http://localhost:8080

# ëª¨ë“  ë¡œê·¸ë¥¼ í•œ ë²ˆì—
docker-compose logs --tail=50 library-nginx library-mysql


================================================================================
ğŸ“± ìœ ìš©í•œ Alias ì„¤ì •
================================================================================

# ~/.bashrc ë˜ëŠ” ~/.zshrcì— ì¶”ê°€

alias dps='docker-compose ps'
alias dup='docker-compose up -d'
alias ddown='docker-compose down'
alias dlogs='docker-compose logs -f'
alias drestart='docker-compose restart'
alias drebuild='docker-compose build --no-cache && docker-compose up -d'

# ì‚¬ìš© ì˜ˆì‹œ
dps        # docker-compose ps
dup        # docker-compose up -d
dlogs      # docker-compose logs -f


================================================================================
ğŸ” ê¶Œí•œ ê´€ë ¨ (Linux/Mac)
================================================================================

# ìŠ¤í¬ë¦½íŠ¸ ì‹¤í–‰ ê¶Œí•œ
chmod +x *.sh
chmod +x setup-permissions.sh

# íŠ¹ì • íŒŒì¼ë§Œ
chmod +x start.sh stop.sh restart.sh

# ìë™ ì„¤ì •
./setup-permissions.sh


================================================================================
ğŸ“ ë¹ ë¥¸ ì ‘ì† ì •ë³´
================================================================================

ì›¹:     http://localhost:8080
ì›¹:     https://library.kontrack.kr

MySQL:  mysql -h localhost -P 3307 -u root -plibrary2024


================================================================================
                    ëª…ë ¹ì–´ ëª¨ìŒ ë - ì¦ê±°ìš´ ì‘ì—… ë˜ì„¸ìš”! ğŸ‰
================================================================================

